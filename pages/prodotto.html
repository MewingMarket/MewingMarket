<!DOCTYPE html>
<html lang="it">
<head>

  <!-- IMPORTA HEAD.HTML PRIMA DEL PARSING -->
  <script>
    document.write('<link rel="import" href="head.html" id="head-import">');
  </script>
  <script>
    const link = document.getElementById("head-import");
    fetch(link.getAttribute("href"))
      .then(r => r.text())
      .then(html => link.insertAdjacentHTML("afterend", html));
  </script>

  <script src="seo.js" defer></script>
  <script src="structured-data.js" defer></script>

</head>

<body>

<!-- HEADER -->
<div id="header-placeholder"></div>
<script>
  fetch("header.html")
    .then(r => r.text())
    .then(h => document.getElementById("header-placeholder").innerHTML = h);
</script>

<main>
  <section class="hero-wrapper" id="prodotto"></section>

  <section class="home-section">
    <h2>Potrebbe interessarti anche</h2>
    <div class="catalogo-grid" id="related"></div>
  </section>
</main>

<!-- FOOTER -->
<div id="footer-placeholder"></div>
<script>
  fetch("footer.html")
    .then(r => r.text())
    .then(h => document.getElementById("footer-placeholder").innerHTML = h);
</script>

<!-- TRACKING VIEW PRODOTTO -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(window.location.search);
  const slug = params.get("slug");

  if (window.trackEvent && slug) {
    trackEvent("product_view", { slug });
  }
});
</script>

<script src="prodotto.js"></script>

</body>
</html>
